<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/css/Questionario.css">
    <script src="caminho/para/Chart.min.js"></script>
    <title>Questionário</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <div id="pagina1" style="display: block;">
        <!--Conteúdo da página-->
        <header>
            <h2>Quantos quilômetros, em média, você dirige de carro a cada mês?</h2>
        </header>

        <div>
            <h2>1km</h2>
            <h2>800km</h2>
        </div>

        <div class="slidecontainer">
            <input min="1" max="800" id="kmCarro">
        </div>

        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
            <label class="form-check-label" for="defaultCheck1">
                Não tenho carro <!--Pular para página 3-->
            </label>
        </div>

    </div>


    <div id="pagina2" style="display: none;">
        <header>
            <h2>Qual a eficiência do seu carro?</h2>
        </header>

        <div>
            <h2>1 km/L</h2>
            <h2>40 km/L</h2>
        </div>

        <div class="slidecontainer">
            <input type="range" min="1" max="40" class="slider" id="eficCarro">
        </div>

    </div>

    <div id="pagina3" style="display: none;">
        <header>
            <h2>
                Quantos quilômetros, em média, você dirige de moto a cada mês?
            </h2>
        </header>
        <div>
            <h2>1 km</h2>
            <h2>800 km</h2>
        </div>

        <div class="slidecontainer">
            <input type="range" min="1" max="800" class="slider" id="kmMoto">
        </div>

        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
            <label class="form-check-label" for="defaultCheck1">
                Não tenho moto <!--Pular para pagina 5-->
            </label>
        </div>

    </div>

    <div id="pagina4" style="display: none;">
        <header>
            <h2>
                Qual o rendimento da sua moto?
            </h2>
        </header>
        <div>
            <h2>1 km/L</h2>
            <h2>40 km/L</h2>
        </div>

        <div class="slidecontainer">
            <input type="range" min="1" max="40" class="slider" id="eficMoto">
        </div>
    </div>

    <div id="pagina5" style="display: none;">
        <header>
            <h2>
                Quantos quilometros você anda de transporte público, aproximadamente, por mês?
            </h2>
        </header>
        <div>
            <h2>0 km</h2>
            <h2>800 km</h2>
        </div>

        <div class="slidecontainer">
            <input type="range" min="1" max="800" class="slider" id="kmTransPublico">
        </div>

        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
            <label class="form-check-label" for="defaultCheck1">
                Não ando de transporte público
            </label>
        </div>

    </div>

    <div id="pagina6" style="display: none;">
        <header>
            <h2>
                Quantas pessoas moram com você?
            </h2>
        </header>
        <div>
            <select class="form-select" aria-label="Default select example" id="pessoasMoram">
                <option selected>Selecione</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
        </div>
    </div>

    <div id="pagina7" style="display: none;">
        <header>
            <h2>
                Das pessoas em sua casa, quantas não consomem carne?
            </h2>
        </header>
        <div>
            <select class="form-select" aria-label="Default select example" id="consumoCarne">
                <option selected>Selecione</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
        </div>
    </div>

    <div id="pagina8" style="display: none;">
        <header>
            <h2>
                Aproximadamente qual a porcentagem de energia reutilizavel da sua casa?
            </h2>
        </header>
        <div>
            <h2>0 %</h2>
            <h2>100%</h2>
        </div>

        <div class="slidecontainer">
            <input type="range" min="0" max="100" class="slider" id="energia">
        </div>



    </div>

    <div id="pagina9" style="display: none;">


        <span id="resultado">
            Resultado
        </span>
        <div id="resultadoTransportePublico"></div>
        <div id="resultadoCarro"></div>
        <canvas id="graficoPizza" width="400" height="400"></canvas>
    </div>


    <button id="botaoNext" class="botao" onclick="next()">próximo</button>
    <button id="botaoBack" class="botao" onclick="back()">Voltar</button>

    <script>

    var kmCarro;
    var eficCarro;
    var kmMoto;
    var eficMoto;
    var kmTransPublico 
    var pessoasMoram;
    var consumoCarne;
    var energia;
    var carne;
    var transporte;
    var teste2;

        var todasAsPaginas = [document.getElementById("pagina1"), document.getElementById("pagina2"), document
            .getElementById("pagina3"), document.getElementById("pagina4"), document.getElementById("pagina5"), document
                .getElementById("pagina6"),
        document.getElementById("pagina7"), document.getElementById("pagina8"), document.getElementById("pagina9")
        ];
        var ref = 0;
        console.log(todasAsPaginas);

        function next() {
            if (ref == todasAsPaginas.length - 1) {
                document.getElementById("botaoNext").disable;
            } else {
                document.getElementById("botaoNext").enable;
                ref = ref + 1;
                tela();
            }

            const gasCarb = 2.28;
            const energiaNRenovavel = 0.0817;
            const emissaoPerCaipta = 7000;
            const carCarne = 27;
            const consumoEnergiaMensal = 1200;
            const emissaoTransportePublico = 1.28;

            kmCarro = document.getElementById("kmCarro").value;
            eficCarro = document.getElementById("eficCarro").value;
            kmMoto = document.getElementById("kmMoto").value;
            eficMoto = document.getElementById("eficMoto").value;
            kmTransPublico = document.getElementById("kmTransPublico").value;
            pessoasMoram = document.getElementById("pessoasMoram").value;
            consumoCarne = document.getElementById("consumoCarne").value;
            energia = document.getElementById("energia").value;

    
            transporte =((kmCarro) * (eficCarro) * (gasCarb)) + ((kmMoto) * (eficMoto) * (gasCarb)) + ((kmTransPublico) * (emissaoTransportePublico));
            carne = (consumoCarne) * (carCarne);
            energia = (consumoEnergiaMensal) * pessoasMoram;

            var kgCarbono = ((kmCarro) * (eficCarro) * (gasCarb)) +
                ((kmMoto) * (eficMoto) * (gasCarb)) +
                ((((consumoEnergiaMensal) / 100) - (energia)) * (energiaNRenovavel)) +
                ((pessoasMoram) * (emissaoPerCaipta)) +
                ((consumoCarne) * (carCarne)) +
                ((kmTransPublico) * (emissaoTransportePublico));

            document.getElementById("resultado").innerHTML = kgCarbono;
            atualizarGrafico();
        }

  
    

    function back() {
        if (ref == 0) {
            document.getElementById("botaoBack").disable;
        } else {
            document.getElementById("botaoBack").enable;
            ref = ref - 1;
            tela();
        }
        console.log(ref);
    }

    function tela() {
        todasAsPaginas[ref].style.display = "block";
        for (var i = 0; i < todasAsPaginas.length; i++) {
            if (i === ref) {
                todasAsPaginas[i].style.display = "block";
            } else {
                todasAsPaginas[i].style.display = "none";
            }
        }
    }

    var ctx = document.getElementById("graficoPizza").getContext("2d");
    var myPieChart;

    function criarGraficoPizza(dados, cores) {
        myPieChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: Object.keys(dados),
                datasets: [{
                    data: Object.values(dados),
                    backgroundColor: cores,
                }]
            },
        });
    }

    function atualizarGraficoPizza(dados) {
        myPieChart.data.datasets[0].data = Object.values(dados);
        myPieChart.update();
    }

    function atualizarGrafico() {
        // Substitua os valores abaixo pelos seus dados reais
        var dadosAtualizados = {
            'transporte': transporte,
            'energia': energia,
            'carne': carne,
        };

        var coresIniciais = ['rgb(255, 99, 132)', 'rgb(54, 162, 235)', 'rgb(0,255,0)'];
        if (!myPieChart) {
            criarGraficoPizza(dadosAtualizados, coresIniciais);
        } else {
            atualizarGraficoPizza(dadosAtualizados);
        }
    }
</script>

</body>

</html>